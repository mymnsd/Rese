# Rese

「Rese」は飲食店予約アプリです。

会員登録をするとマイページが開設され、店舗の予約、お気に入りに追加、レビュー投稿、オンライン決済ができます。
また、管理者様用ページと店舗代表者様用ページも作成しております。

## 作成目的

laravel学習の総まとめとして作成しました。

与えられた要件やイメージをもとにテーブル作成、ER図、コーディングを行いました。

## 機能一覧

・ユーザー様、管理者様会員登録（名前、メールアドレス、パスワードを入力）

・ユーザー様、管理者様、店舗代表者様ログイン（メールアドレスとパスワードで認証）、ログアウト

・画像をストレージに保存

・リマインダーメール送信

・メール認証

・ユーザー様向け機能

　　*お気に入り登録、解除

　　*エリア、ジャンル、キーワードで店舗を検索

　　*店舗情報詳細を表示

　　*店舗の予約、変更、キャンセル

　　*レビュー投稿

　　*予約内容のQRコード生成
  
  　　*stripeでの決済

・管理者様は店舗代表者様を登録できます

・店舗代表者様向け機能

　　*新店舗追加、既存店の更新、削除

  　　*予約情報の照合

   　　*お知らせメール送信

## 使用技術

・PHP7.4.9

・laravel8

・MySQL8.0.26

## 環境構築

### Dockerビルド

  1.git clone git@github.com:mymnsd/Rese.git

  2.DockerDesktopアプリを立ち上げる

  3.docker-compose up -d --build

### laravel環境構築

  1.docker-compose exec php bash

  2.composer install

  3.「.env.example」ファイルを「.env」ファイルに命名を変更。または、新しく.envファイルを作成

  4..envに以下の環境変数を追加

    DB_CONNECTION=mysql

    DB_HOST=mysql

    DB_PORT=3306

    DB_DATABASE=laravel_db

    DB_USERNAME=laravel_user

    DB_PASSWORD=laravel_pass

  5.アプリケーションキーの作成

    php artisan key:generate

## メール認証について

Gmailを使用して認証できるようにしています。

ご自身でアカウントを取得していただき、env.ファイルに以下を記述してください。

MAIL_MAILER=smtp

MAIL_HOST=smtp.gmai.com

MAIL_PORT=587

MAIL_USERNAME=あなたのgmailアドレス

MAIL_PASSWORD=アプリパスワード

MAIL_ENCRYPTION=tls

MAIL_FROM_ADDRESS=あなたのgmailアドレス（MAIL_USERNAMEと同じ）

MAIL_FROM_NAME="${APP_NAME}"

## csvファイルのインポート方法

このアプリでは管理者様が店舗情報をcsvファイルからインポートすることができます。

以下の手順でcsvファイルを作成してください。

### csvファイルのフォーマット

csvファイルには以下の列を含めます。列の順序も以下の通りにしてください。

項目はすべて入力必須です。

1. **店舗名**: 店舗の名前を記載します。（50文字以内）

2. **店舗代表者**: 店舗代表者の名前を記載します。

3. **地域**: 店舗の所在地（東京都、大阪府、福岡県のいずれか）を記載します。

4. **ジャンル**: 店舗のジャンル（寿司、焼肉、イタリアン、居酒屋、ラーメンのいずれか）を記載します。

5. **店舗概要**: 店舗の簡単な説明を記載します。（400文字以内）

6. **画像URL**: 店舗の画像URL（JPEGまたはPNG形式）を記載します。

7. **価格**: 店舗の価格帯を記載します。

### サンプルcsv

以下のフォーマットで記述してください。

店舗名,店舗代表者,地域,ジャンル,店舗概要,画像URL,価格

寿司屋,山田太郎,東京都,寿司,美味しいお寿司が食べられます,https://example.com/image.jpg,5000

焼肉店,佐藤次郎,大阪府,焼肉,最高級の焼肉が楽しめます,https://example.com/image2.png,7000

### 注意事項

店舗代表者は先に店舗代表者登録ページから登録をしてインポートしないとデータが反映されません。


## stripe決済のテストカードについて

stripeでは支払いをテストカードでシミュレーションしてテストすることができます。

以下の情報を使用してください。

### テストカード

**成功する支払い**  

　　**カード番号**: `4242 4242 4242 4242`

　　**CVC**: 123 

　　**有効期限**: 未来の日付

**3Dセキュア認証**  

　　**カード番号**: `4000 0025 0000 3155`
  
  　　**CVC**: 123  

　　**有効期限**: 未来の日付

**支払い失敗（限度額超過）**  

　　**カード番号**: `4000 0000 0000 9995`
  
  　　**CVC**: 123  

  　　**有効期限**: 未来の日付

### 注意事項

テストカードは開発環境専用です。




## テーブル仕様書

![スクリーンショット (78)](https://github.com/user-attachments/assets/4feb9418-433d-44a8-a66b-fb53091195cd)

![スクリーンショット (79)](https://github.com/user-attachments/assets/596292bc-8d3b-4ef8-9fa7-216de90917df)

![スクリーンショット (80)](https://github.com/user-attachments/assets/4bdeed37-9469-4282-986d-35d0cc9ca9bd)

![スクリーンショット (81)](https://github.com/user-attachments/assets/717d4803-75c8-43bf-bbb1-ad9fd595dcbc)

## ER図

![スクリーンショット (77)](https://github.com/user-attachments/assets/301d1ab3-97b4-45bc-a488-eb73cd600511)

## テストアカウントについて

管理者様と店舗代表者のテストアカウントを作成しております。

　　・管理者様→アドレス：admin@example.com、パスワード：password

  　　・店舗代表者様→アドレス：storemanager@example.com、パスワード:password

   と入力していただくと管理者様は「Admin User」として、店舗代表者様は「テスト店舗代表者」としてそれぞれログインできます。

## レビュー機能の変更

今回テスト用にレビュー機能を変更しています。

前回の提出用コードを利用して作りましたので、ページ遷移などが変更されています。

今回は使用しなかったファイルなどがありますがそのまま残しています。
  　　　　

## URL

開発環境：http://localhost/

phpMyAdmin:：http://localhost:8080/

















